{% extends "base.html" %}
{% block content %}
<h2>Ciao {{ current_user.username }}!</h2>
<a href="{{ url_for('request_vm') }}" class="btn btn-success mb-3">Richiedi nuova VM</a>

<h4>Le tue richieste</h4>
<table class="table">
    <thead>
        <tr>
            <th>#</th>
            <th>Tipo</th>
            <th>Stato</th>
            <th>Data</th>
            <th>Dettagli</th>
        </tr>
    </thead>
    <tbody>
        {% for r in requests %}
        <tr>
            <td>{{ r.id }}</td>
            <td>{{ r.vm_type|upper }}</td>
            <td>
                {% if r.status == 'pending' %}<span class="badge bg-warning">In attesa</span>{% endif %}
                {% if r.status == 'approved' %}<span class="badge bg-success">Approvata</span>{% endif %}
                {% if r.status == 'rejected' %}<span class="badge bg-danger">Rifiutata</span>{% endif %}
            </td>
            <td>{{ r.created_at.strftime('%d/%m %H:%M') }}</td>
            <td>
                {% if r.status == 'approved' %}
                    IP: {{ r.ip_address }}<br>
                    Password: {{ r.password }}
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}